<simulation>
  <control>
    <duration>1000</duration>
    <startmonth>1</startmonth>
    <startyear>2000</startyear>
  </control>
  
  <archetypes>
        <spec>
            <lib>cycamore</lib>
            <name>Source</name>
        </spec>
        <spec>
            <lib>cycamore</lib>
            <name>Sink</name>
        </spec>
        <spec>
            <lib>cycamore</lib>
            <name>Reactor</name>
        </spec>
        <spec>
            <lib>agents</lib>
            <name>NullRegion</name>
        </spec>
        <spec>
            <lib>agents</lib>
            <name>NullInst</name>
        </spec>
        <spec>
            <lib>cycamore</lib>
            <name>DeployInst</name>
        </spec>
        <spec>
            <lib>d3ploy.demand_driven_deployment_inst</lib>
            <name>DemandDrivenDeploymentInst</name>
        </spec>
  </archetypes>

  <facility>
    <name>source</name>
    <config>
        <Source>
            <outcommod>fresh_fuel</outcommod>
            <outrecipe>fresh_fuel_recipe</outrecipe>
            <throughput>1e6</throughput>
        </Source>
    </config>
  </facility>
  <facility>
        <name>sink</name>
        <config>
            <Sink>
                <in_commods>
                    <val>spent_fuel</val>
                </in_commods>
                <max_inv_size>1e6</max_inv_size>
            </Sink>
        </config>
  </facility>
  <facility>
    <name>LWR</name>
    <lifetime>240</lifetime>
    <config>
      <Reactor>
        <fuel_incommods> <val>fresh_fuel</val> </fuel_incommods>
        <fuel_inrecipes> <val>fresh_fuel_recipe</val> </fuel_inrecipes>
        <fuel_outcommods> <val>spent_fuel</val> </fuel_outcommods>
        <fuel_outrecipes> <val>spent_fuel_recipe</val> </fuel_outrecipes>
        <cycle_time>18</cycle_time>
        <refuel_time>1</refuel_time>
        <assem_size>100</assem_size>
        <n_assem_core>1</n_assem_core>
        <n_assem_batch>1</n_assem_batch>
        <power_cap>100</power_cap>
      </Reactor>
    </config>
  </facility>
  <facility>
    <name>AdvancedReactor</name>
    <lifetime>240</lifetime>
    <config>
      <Reactor>
        <fuel_incommods> <val>fresh_fuel</val> </fuel_incommods>
        <fuel_inrecipes> <val>fresh_fuel_recipe</val> </fuel_inrecipes>
        <fuel_outcommods> <val>spent_fuel</val> </fuel_outcommods>
        <fuel_outrecipes> <val>spent_fuel_recipe</val> </fuel_outrecipes>
        <cycle_time>24</cycle_time>
        <refuel_time>1</refuel_time>
        <assem_size>75</assem_size>
        <n_assem_core>1</n_assem_core>
        <n_assem_batch>1</n_assem_batch>
        <power_cap>75</power_cap>
      </Reactor>
    </config>
  </facility>

  <region>
        <config>
            <NullRegion>
            </NullRegion>
        </config>

        <institution>
          <config>
            <NullInst/>
          </config>
          <initialfacilitylist>
            <entry>
              <number>1</number>
              <prototype>sink</prototype>
            </entry>  
            <entry>
              <number>1</number>
              <prototype>source</prototype>
            </entry>             
          </initialfacilitylist>
          <name>sink_source_facilities</name>
        </institution>

        <institution>
            <config>
                <DemandDrivenDeploymentInst>
			<calc_method>sw_seasonal</calc_method>
                    <facility_commod>
                        <item>
                            <facility>AdvancedReactor</facility>
                            <commod>POWER</commod>
                        </item>
                    </facility_commod>
                    <facility_capacity>
                        <item>
                            <facility>AdvancedReactor</facility>
                            <capacity>75</capacity>
                        </item>
                    </facility_capacity>
                    <driving_commod>POWER</driving_commod>
                    <demand_eq>np.heaviside(t-500,0.5)*300</demand_eq>
                    <record>1</record>
                    <steps>1</steps>
                </DemandDrivenDeploymentInst>
            </config>
            <name>source_inst</name>
            </institution>

        <!--institution>
          <name>LWRDeployment</name>
          <config>
            <DeployInst>
              <prototypes>
                <val>LWR</val>
                <val>LWR</val>
                <val>LWR</val>
              </prototypes>
              <build_times>
                <val>1</val>
                <val>100</val>
                <val>200</val>
              </build_times>
              <n_build> 
                <val>1</val>
                <val>2</val>
                <val>1</val>
              </n_build>
            </DeployInst>
          </config>
        </institution-->

        <name>SingleRegion</name>
  </region>
  
  <recipe>
    <name>fresh_fuel_recipe</name>
    <basis>atom</basis>
    <nuclide>
      <id>922350000</id>
      <comp>0.00711</comp>
    </nuclide>
    <nuclide>
      <id>922380000</id>
      <comp>0.99289</comp>
    </nuclide>
  </recipe>
  <recipe>
    <name>spent_fuel_recipe</name>
    <basis>atom</basis>
    <nuclide>
      <id>922350000</id>
      <comp>0.00711</comp>
    </nuclide>
    <nuclide>
      <id>922380000</id>
      <comp>0.99289</comp>
    </nuclide>
  </recipe>

</simulation>
